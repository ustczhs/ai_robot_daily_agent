# æ¯æ—¥AIä¸æœºå™¨äººæŠ€æœ¯è¿›å±•æ™ºèƒ½ä½“

è¿™æ˜¯ä¸€ä¸ªåŸºäºAgentå¼€å‘æ€è·¯å®ç°çš„æ™ºèƒ½ä½“ï¼Œæ—¨åœ¨æ¯æ—¥è‡ªåŠ¨æ”¶é›†ã€åˆ†æã€æ•´ç†æœ€æ–°çš„AIä¸æœºå™¨äººæŠ€æœ¯è¿›å±•ï¼Œå¹¶ç”Ÿæˆä¸€ä»½ç»“æ„åŒ–çš„æ—¥æŠ¥ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **å…¨ç½‘ä¿¡æ¯é‡‡é›†**ï¼šé€šè¿‡æœç´¢å¼•æ“å…³é”®è¯æŠ“å–å…¨ç½‘æœ€æ–°çš„æŠ€æœ¯èµ„è®¯ï¼Œç¡®ä¿ä¿¡æ¯æ¥æºçš„å¹¿æ³›æ€§ã€‚
- **æ™ºèƒ½å†…å®¹åˆ†æ**ï¼šåˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¯¹å†…å®¹è¿›è¡Œæ·±åº¦åˆ†æï¼Œè¯„ä¼°æŠ€æœ¯ä»·å€¼ã€ç›¸å…³æ€§å’Œæ–°é²œåº¦ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œåˆ†ç±»ã€‚
- **è¯­ä¹‰å»é‡**ï¼šå†…ç½®å‘é‡æ•°æ®åº“ï¼ˆChromaDBï¼‰ï¼Œå¯¹å†…å®¹è¿›è¡Œè¯­ä¹‰çº§åˆ«çš„å»é‡ï¼Œç¡®ä¿æ—¥æŠ¥å†…å®¹çš„ç‹¬ç‰¹æ€§å’Œé«˜ä»·å€¼ã€‚
- **è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”ŸæˆåŒ…å«**æŠ€æœ¯åˆ†ç±»**ã€**è¶‹åŠ¿åˆ†æ**ã€**å‰æ²¿æ´å¯Ÿ**å’Œ**æ–¹å‘é¢„æµ‹**çš„ç»“æ„åŒ–MarkdownæŠ¥å‘Šã€‚
- **å¹½é»˜ç‚¹è¯„**ï¼šä¸ºæ¯æ¡èµ„è®¯ç”Ÿæˆä¸€å¥ç®€æ´å¹½é»˜çš„ç‚¹è¯„ï¼Œå¢åŠ æŠ¥å‘Šçš„å¯è¯»æ€§å’Œè¶£å‘³æ€§ã€‚
- **é«˜åº¦å¯é…ç½®**ï¼šæ‰€æœ‰å…³é”®å‚æ•°ï¼ˆå¦‚LLMæ¨¡å‹ã€æœç´¢å…³é”®è¯ã€åˆ†ç±»æ ‡å‡†ç­‰ï¼‰å‡å¯é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œè°ƒæ•´ã€‚
- **å®šæ—¶è‡ªåŠ¨è¿è¡Œ**ï¼šå¯é…åˆLinux Cronå®ç°æ¯æ—¥å®šæ—¶è‡ªåŠ¨è¿è¡Œï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚

## ğŸ›ï¸ æŠ€æœ¯æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨åŸºäºLangGraphçš„Agentç¼–æ’æ¶æ„ï¼Œå°†æ•´ä¸ªä»»åŠ¡æµç¨‹æ‹†åˆ†ä¸ºå››ä¸ªç‹¬ç«‹çš„Agentï¼ŒååŒå®Œæˆæ—¥æŠ¥çš„ç”Ÿæˆã€‚

```mermaid
graph TD
    A[å®šæ—¶è°ƒåº¦ Cron] --> B{Agentç¼–æ’å™¨ LangGraph};
    B --> C[1. ä¿¡æ¯é‡‡é›† Agent];
    C --> D[2. å†…å®¹åˆ†æ Agent];
    D --> E[3. è¯­ä¹‰å»é‡ Agent];
    E --> F[4. æŠ¥å‘Šç”Ÿæˆ Agent];
    F --> G[ç”Ÿæˆæ—¥æŠ¥ .md];

    subgraph å·¥å…·å±‚
        C --> H[æœç´¢å¼•æ“];
        D --> I[LLM API];
        E --> J[å‘é‡æ•°æ®åº“ ChromaDB];
        F --> I;
    end
```

- **Agentç¼–æ’å™¨ (Orchestrator)**ï¼šåŸºäº`LangGraph`å®ç°ï¼Œè´Ÿè´£å®šä¹‰å’Œæ‰§è¡Œæ•´ä¸ªå·¥ä½œæµï¼Œè°ƒåº¦å„ä¸ªAgentæŒ‰é¡ºåºå·¥ä½œã€‚
- **ä¿¡æ¯é‡‡é›†Agent (Collector)**ï¼šè´Ÿè´£æ ¹æ®å…³é”®è¯ä»Googleç­‰æœç´¢å¼•æ“çˆ¬å–æœ€æ–°çš„æ–°é—»èµ„è®¯ã€‚
- **å†…å®¹åˆ†æAgent (Analyzer)**ï¼šè°ƒç”¨LLMå¯¹æ”¶é›†åˆ°çš„ä¿¡æ¯è¿›è¡Œè´¨é‡è¯„åˆ†å’Œåˆ†ç±»ï¼Œè¿‡æ»¤æ‰ä½ä»·å€¼å†…å®¹ã€‚
- **è¯­ä¹‰å»é‡Agent (Deduplicator)**ï¼šå°†é«˜è´¨é‡å†…å®¹å‘é‡åŒ–ï¼Œå¹¶å­˜å…¥ChromaDBã€‚é€šè¿‡è®¡ç®—è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œè¿‡æ»¤æ‰ä¸å†å²å†…å®¹é‡å¤çš„èµ„è®¯ã€‚
- **æŠ¥å‘Šç”ŸæˆAgent (Reporter)**ï¼šå°†æœ€ç»ˆç­›é€‰å‡ºçš„ç‹¬ç‰¹èµ„è®¯æ•´ç†æˆç»“æ„åŒ–çš„MarkdownæŠ¥å‘Šï¼Œå¹¶è°ƒç”¨LLMç”Ÿæˆè¶‹åŠ¿åˆ†æã€æ´å¯Ÿå’Œé¢„æµ‹ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

æ‚¨å¯ä»¥åœ¨æœ¬åœ°çš„Ubuntu 22.04ç³»ç»Ÿä¸Šè½»æ¾éƒ¨ç½²å’Œè¿è¡Œæ­¤æ™ºèƒ½ä½“ã€‚

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²å®‰è£…`Python 3.11+`å’Œ`git`ã€‚

```bash
sudo apt update
sudo apt install python3.11 python3.11-venv git -y
```

### 2. ä¸‹è½½é¡¹ç›®

å°†æœ¬é¡¹ç›®ä»£ç å…‹éš†åˆ°æ‚¨çš„æœ¬åœ°ç”µè„‘ã€‚

```bash
git clone <your-repo-url> ai_robot_daily_agent
cd ai_robot_daily_agent
```

*(æ³¨ï¼šæ­¤å¤„`<your-repo-url>`åº”æ›¿æ¢ä¸ºå®é™…çš„ä»£ç ä»“åº“åœ°å€ã€‚åœ¨å½“å‰ç¯å¢ƒä¸‹ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘ä»¬å·²ä¸ºæ‚¨å‡†å¤‡å¥½çš„æ–‡ä»¶ã€‚)*

### 3. åˆ›å»ºå¹¶æ¿€æ´»Condaç¯å¢ƒ

æˆ‘ä»¬ä½¿ç”¨Condaæ¥ç®¡ç†é¡¹ç›®ç¯å¢ƒã€‚

```bash
conda create -n daily_agent python=3.11 -y
conda activate daily_agent
```

### 4. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 5. é…ç½®APIå¯†é’¥

æœ¬é¡¹ç›®ä½¿ç”¨é˜¿é‡Œç™¾ç‚¼ï¼ˆDashScopeï¼‰APIã€‚è¯·åœ¨ç»ˆç«¯ä¸­è®¾ç½®æ‚¨çš„APIå¯†é’¥ã€‚

```bash
export DASHSCOPE_API_KEY="sk-??"
```

**é‡è¦æç¤º**ï¼šä¸ºäº†é•¿æœŸä½¿ç”¨ï¼Œå»ºè®®å°†æ­¤è¡Œå‘½ä»¤æ·»åŠ åˆ°æ‚¨çš„`~/.bashrc`æˆ–`~/.zshrc`æ–‡ä»¶ä¸­ï¼Œç„¶åæ‰§è¡Œ`source ~/.bashrc`ä½¿å…¶ç”Ÿæ•ˆã€‚

### 6. è¿è¡ŒAgent

ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å¼€å§‹ç”Ÿæˆæ‚¨çš„ç¬¬ä¸€ä»½æŠ€æœ¯æ—¥æŠ¥ã€‚

```bash
./main.py
```

è¿è¡ŒæˆåŠŸåï¼Œæ‚¨å°†åœ¨`reports`ç›®å½•ä¸‹æ‰¾åˆ°ç”Ÿæˆçš„Markdownæ ¼å¼æ—¥æŠ¥æ–‡ä»¶ï¼Œä¾‹å¦‚`reports/ai_robot_daily_20260106.md`ã€‚

## âš™ï¸ è‡ªåŠ¨åŒ–è°ƒåº¦

è¦å®ç°æ¯æ—¥è‡ªåŠ¨è¿è¡Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Linuxçš„`cron`æœåŠ¡ã€‚

1.  **ç¼–è¾‘Cronä»»åŠ¡**

    ```bash
    crontab -e
    ```

2.  **æ·»åŠ å®šæ—¶ä»»åŠ¡**

    åœ¨æ‰“å¼€çš„æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹ä¸€è¡Œï¼Œè®¾ç½®ä»»åŠ¡åœ¨æ¯å¤©æ—©ä¸Š8ç‚¹è¿è¡Œï¼š

    ```cron
    0 8 * * * /usr/bin/bash /home/ubuntu/ai_robot_daily_agent/run.sh >> /home/ubuntu/ai_robot_daily_agent/logs/cron.log 2>&1
    ```

    *(è¯·ç¡®ä¿ä¸Šé¢çš„è·¯å¾„`/home/ubuntu/ai_robot_daily_agent/`ä¸æ‚¨çš„å®é™…é¡¹ç›®è·¯å¾„ä¸€è‡´)*

3.  **åˆ›å»º`run.sh`è„šæœ¬**

    åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º`run.sh`çš„è„šæœ¬æ–‡ä»¶ï¼Œç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡å¹¶æ‰§è¡Œä¸»ç¨‹åºã€‚

    ```bash
    #!/bin/bash
    
    # åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•
    cd /home/ubuntu/ai_robot_daily_agent || exit
    
    # è®¾ç½®APIå¯†é’¥
    export DASHSCOPE_API_KEY="sk-YourActualDashScopeKey"
    
    # æ¿€æ´»Condaç¯å¢ƒ
    source $(conda info --base)/etc/profile.d/conda.sh
    conda activate daily_agent
    
    # è¿è¡Œä¸»ç¨‹åº
    python main.py
    
    # é€€å‡ºç¯å¢ƒ
    conda deactivate
    ```

4.  **ä¸ºè„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™**

    ```bash
    chmod +x run.sh
    ```

ç°åœ¨ï¼Œæ‚¨çš„æ™ºèƒ½ä½“å°†åœ¨æ¯å¤©æ—©ä¸Š8ç‚¹è‡ªåŠ¨ä¸ºæ‚¨ç”Ÿæˆæœ€æ–°çš„æŠ€æœ¯æ—¥æŠ¥ã€‚

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

æ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œé€šè¿‡ä¿®æ”¹`config/config.yaml`æ–‡ä»¶æ¥å®šåˆ¶Agentçš„è¡Œä¸ºã€‚

- **LLMé…ç½® (`llm`)**: æ›´æ¢ä¸åŒçš„GPTæ¨¡å‹ï¼Œå¦‚`gpt-4.1-nano`ä»¥é™ä½æˆæœ¬ï¼Œæˆ–è°ƒæ•´`temperature`æ¥æ”¹å˜ç”Ÿæˆå†…å®¹çš„åˆ›é€ æ€§ã€‚
- **æœç´¢å…³é”®è¯ (`sources.keywords`)**: æ·»åŠ æˆ–ä¿®æ”¹å…³é”®è¯ï¼Œä»¥æ‹“å®½æˆ–èšç„¦ä¿¡æ¯é‡‡é›†çš„èŒƒå›´ã€‚
- **åˆ†ç±»æ ‡å‡† (`categories`)**: è‡ªå®šä¹‰æ‚¨å…³å¿ƒçš„æŠ€æœ¯é¢†åŸŸï¼ŒAgentä¼šè‡ªåŠ¨æŒ‰ç…§æ–°çš„åˆ†ç±»æ ‡å‡†è¿›è¡Œæ•´ç†ã€‚
- **å†…å®¹è¿‡æ»¤ (`filtering`)**: è°ƒæ•´`min_quality_score`ï¼ˆæœ€ä½è´¨é‡åˆ†ï¼‰å’Œ`similarity_threshold`ï¼ˆå»é‡ç›¸ä¼¼åº¦ï¼‰æ¥æ§åˆ¶å†…å®¹çš„è´¨é‡å’Œç‹¬ç‰¹æ€§ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
.ai_robot_daily_agent/
â”œâ”€â”€ agents/               # Agentæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ analyzer.py       # å†…å®¹åˆ†æAgent
â”‚   â”œâ”€â”€ collector.py      # ä¿¡æ¯é‡‡é›†Agent
â”‚   â”œâ”€â”€ deduplicator.py   # è¯­ä¹‰å»é‡Agent
â”‚   â”œâ”€â”€ orchestrator.py   # Agentç¼–æ’å™¨
â”‚   â””â”€â”€ reporter.py       # æŠ¥å‘Šç”ŸæˆAgent
â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ config.yaml
â”œâ”€â”€ data/                 # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ chroma_db/        # å‘é‡æ•°æ®åº“
â”‚   â””â”€â”€ history.db        # å†å²è®°å½•æ•°æ®åº“
â”œâ”€â”€ logs/                 # æ—¥å¿—æ–‡ä»¶
â”‚   â””â”€â”€ agent.log
â”œâ”€â”€ reports/              # ç”Ÿæˆçš„æŠ¥å‘Š
â”‚   â””â”€â”€ example_report.md
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ state.py          # AgentçŠ¶æ€å®šä¹‰
â”œâ”€â”€ main.py               # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ requirements.txt      # Pythonä¾èµ–
â”œâ”€â”€ run.sh                # Cronæ‰§è¡Œè„šæœ¬
â””â”€â”€ README.md             # æœ¬æ–‡æ¡£
```
